"""
Binance Derivatives Trading Options WebSocket Market Streams

OpenAPI Specification for the Binance Derivatives Trading Options WebSocket Market Streams
The version of the OpenAPI document: 1.0.0
Generated by OpenAPI Generator (https://openapi-generator.tech)

Do not edit the class manually.
"""

from binance_common.errors import RequiredError
from binance_common.utils import ws_streams_placeholder
from binance_common.websocket import (
    WebSocketStreamBase,
    RequestStream,
    RequestStreamHandle,
)

from ..models import DiffBookDepthStreamsResponse
from ..models import IndividualSymbolBookTickerStreamsResponse
from ..models import PartialBookDepthStreamsResponse
from ..models import Ticker24HourResponse
from ..models import TradeStreamsResponse


from typing import Optional, Union


class PublicApi:
    """Client for PublicApi endpoints."""

    def __init__(self, websocket_base: WebSocketStreamBase) -> None:
        self.websocket_base = websocket_base

    async def diff_book_depth_streams(
        self,
        symbol: Union[str, None],
        id: Optional[int] = None,
        update_speed: Optional[str] = None,
    ) -> RequestStreamHandle:
        r"""
            Diff Book Depth Streams
            /<symbol>@depth@<updateSpeed>
            https://developers.binance.com/docs/derivatives/options-trading/websocket-market-streams/Diff-Book-Depth-Streams

            Bids and asks, pushed every 500 milliseconds, 100 milliseconds (if existing)

        Update Speed: 100ms or 500ms

            Args:
                    symbol (Union[str, None]): The symbol parameter
                    id (Optional[int] = None): Unique WebSocket request ID.
                    update_speed (Optional[str] = None): WebSocket stream update speed

            Returns:
                RequestStreamHandle

            Raises:
                RequiredError: If a required parameter is missing.

        """

        if symbol is None:
            raise RequiredError(
                field="symbol", error_message="Missing required parameter 'symbol'"
            )

        stream = ws_streams_placeholder(
            "/<symbol>@depth@<updateSpeed>".replace("/", "", 1),
            {
                "symbol": symbol,
                "id": id,
                "update_speed": update_speed,
            },
        )

        return await RequestStream(
            self.websocket_base,
            stream=stream,
            response_model=DiffBookDepthStreamsResponse,
            stream_url="public",
        )

    async def individual_symbol_book_ticker_streams(
        self,
        symbol: Union[str, None],
        id: Optional[int] = None,
    ) -> RequestStreamHandle:
        r"""
            Individual Symbol Book Ticker Streams
            /<symbol>@bookTicker
            https://developers.binance.com/docs/derivatives/options-trading/websocket-market-streams/Individual-Symbol-Book-Ticker-Streams

            Pushes any update to the best bid or ask's price or quantity in real-time for a specified symbol.

        Update Speed: Real-Time

            Args:
                    symbol (Union[str, None]): The symbol parameter
                    id (Optional[int] = None): Unique WebSocket request ID.

            Returns:
                RequestStreamHandle

            Raises:
                RequiredError: If a required parameter is missing.

        """

        if symbol is None:
            raise RequiredError(
                field="symbol", error_message="Missing required parameter 'symbol'"
            )

        stream = ws_streams_placeholder(
            "/<symbol>@bookTicker".replace("/", "", 1),
            {
                "symbol": symbol,
                "id": id,
            },
        )

        return await RequestStream(
            self.websocket_base,
            stream=stream,
            response_model=IndividualSymbolBookTickerStreamsResponse,
            stream_url="public",
        )

    async def partial_book_depth_streams(
        self,
        symbol: Union[str, None],
        level: Union[str, None],
        id: Optional[int] = None,
        update_speed: Optional[str] = None,
    ) -> RequestStreamHandle:
        r"""
            Partial Book Depth Streams
            /<symbol>@depth<level>@<updateSpeed>
            https://developers.binance.com/docs/derivatives/options-trading/websocket-market-streams/Partial-Book-Depth-Streams

            Top **<levels\>** bids and asks, Valid levels are **<levels\>** are 5, 10, 20.

        Update Speed: 100ms or 500ms

            Args:
                    symbol (Union[str, None]): The symbol parameter
                    level (Union[str, None]): The level parameter
                    id (Optional[int] = None): Unique WebSocket request ID.
                    update_speed (Optional[str] = None): WebSocket stream update speed

            Returns:
                RequestStreamHandle

            Raises:
                RequiredError: If a required parameter is missing.

        """

        if symbol is None:
            raise RequiredError(
                field="symbol", error_message="Missing required parameter 'symbol'"
            )
        if level is None:
            raise RequiredError(
                field="level", error_message="Missing required parameter 'level'"
            )

        stream = ws_streams_placeholder(
            "/<symbol>@depth<level>@<updateSpeed>".replace("/", "", 1),
            {
                "symbol": symbol,
                "level": level,
                "id": id,
                "update_speed": update_speed,
            },
        )

        return await RequestStream(
            self.websocket_base,
            stream=stream,
            response_model=PartialBookDepthStreamsResponse,
            stream_url="public",
        )

    async def ticker24_hour(
        self,
        symbol: Union[str, None],
        id: Optional[int] = None,
    ) -> RequestStreamHandle:
        r"""
            24-hour TICKER
            /<symbol>@optionTicker
            https://developers.binance.com/docs/derivatives/options-trading/websocket-market-streams/24-hour-TICKER

            24hr ticker info for all symbols. Only symbols whose ticker info changed will be sent.

        Update Speed: 1000ms

            Args:
                    symbol (Union[str, None]): The symbol parameter
                    id (Optional[int] = None): Unique WebSocket request ID.

            Returns:
                RequestStreamHandle

            Raises:
                RequiredError: If a required parameter is missing.

        """

        if symbol is None:
            raise RequiredError(
                field="symbol", error_message="Missing required parameter 'symbol'"
            )

        stream = ws_streams_placeholder(
            "/<symbol>@optionTicker".replace("/", "", 1),
            {
                "symbol": symbol,
                "id": id,
            },
        )

        return await RequestStream(
            self.websocket_base,
            stream=stream,
            response_model=Ticker24HourResponse,
            stream_url="public",
        )

    async def trade_streams(
        self,
        symbol: Union[str, None],
        id: Optional[int] = None,
    ) -> RequestStreamHandle:
        r"""
            Trade Streams
            /<symbol>@optionTrade
            https://developers.binance.com/docs/derivatives/options-trading/websocket-market-streams/Trade-Streams

            The Trade Streams push raw trade information for specific symbol or underlying asset. E.g.[btcusdt@optionTrade](wss://fstream.binance.com/public/stream?streams=btcusdt@optionTrade)

        Update Speed: 50ms

            Args:
                    symbol (Union[str, None]): The symbol parameter
                    id (Optional[int] = None): Unique WebSocket request ID.

            Returns:
                RequestStreamHandle

            Raises:
                RequiredError: If a required parameter is missing.

        """

        if symbol is None:
            raise RequiredError(
                field="symbol", error_message="Missing required parameter 'symbol'"
            )

        stream = ws_streams_placeholder(
            "/<symbol>@optionTrade".replace("/", "", 1),
            {
                "symbol": symbol,
                "id": id,
            },
        )

        return await RequestStream(
            self.websocket_base,
            stream=stream,
            response_model=TradeStreamsResponse,
            stream_url="public",
        )
